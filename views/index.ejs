<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>StayMyPg - All Listings</title>
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>

<nav class="navbar">
    <a href="/" class="logo"><img src="/image/logo.jpeg" alt="Logo" style="width: 150px; height: 130px; object-fit: contain;"></a>
    <div class="nav-links">
        <a href="/" class="nav-btn active">Home</a>
        <% if (user) { %>
            <a href="/logout" class="nav-btn logout">Logout</a>
        <% } else { %>
            <a href="/login" class="nav-btn">Login</a>
        <% } %>
    </div>
</nav>

<header class="hero">
    <div class="hero-content">
        <h1>Find Your Perfect <span class="blue-text">PG & Hostel</span></h1>
        
        <form action="/search" method="GET" class="search-box">
            <div class="input-group">
                <label>Choose Location</label>
                <select name="location" id="locationSelect">
                    <option value="">Select area in Pune</option>
                    <% areaData.forEach(area => { %>
                        <option value="<%= area.location %>"><%= area.location %></option>
                    <% }) %>
                </select>
            </div>
            
            <div class="input-group">
                <label>Your College</label>
                <select name="college" id="collegeSelect">
                    <option value="">Select College</option>
                    <% areaData.forEach(area => { %>
                        <% area.colleges.forEach(college => { %>
                            <option value="<%= college %>"><%= college %></option>
                        <% }) %>
                    <% }) %>
                </select>
            </div>
            
            <button type="submit" class="search-btn">Find PGs</button>
        </form>
    </div>
</header>

<div class="filter-wrapper">
    <button class="filter-toggle-btn" onclick="document.getElementById('filterMenu').classList.toggle('show')">
        üîç Filter Options
    </button>

    <div id="filterMenu" class="filter-dropdown-content">
        <form action="/search" method="GET">
            <input type="hidden" name="location" value="<%= typeof location !== 'undefined' ? location : '' %>">
            
            <div class="filter-group">
                <label>Gender</label>
                <select name="gender">
                    <option value="">Any</option>
                    <option value="Boys">Boys</option>
                    <option value="Girls">Girls</option>
                    <option value="Unisex">Unisex</option>
                </select>
            </div>

            <div class="filter-group">
                <label>Sharing</label>
                <select name="sharing">
                    <option value="">Any</option>
                    <option value="2">2 Sharing</option>
                    <option value="3">3 Sharing</option>
                    <option value="4">4 Sharing</option>
                </select>
            </div>

            <div class="amenities-grid">
                <label><input type="checkbox" name="wifi" value="true"> WiFi</label>
                <label><input type="checkbox" name="food" value="true"> Food</label>
                <label><input type="checkbox" name="ac" value="true"> AC</label>
            </div>

            <button type="submit" class="apply-btn">Apply Filters</button>
        </form>
    </div>
</div>

<section class="listings-container">
    <div class="pg-grid">
        <% if(pgs.length > 0) { %>
            <% pgs.forEach(pg => { %>
                <div class="pg-card" onclick="window.location.href='/pg/<%= pg.id %>'">
                    
                    <div class="pg-img-container">
                        <img src="<%= pg.image %>" alt="<%= pg.name %>">
                        <span class="gender-badge <%= pg.gender.toLowerCase() %>">
                            <%= pg.gender %>
                        </span>
                    </div>
                    <div style="padding: 20px;">
                        <h3><%= pg.name %></h3>
                        <p><%= pg.location %></p>
                        <p class="price">‚Çπ<%= pg.rent %></p>
                    </div>
                </div>
            <% }) %>
        <% } else { %>
            <p style="text-align: center; width: 100%; color: white;">No PGs listed yet.</p>
        <% } %>
    </div>
</section>

</body>
</html>