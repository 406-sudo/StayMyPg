<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= pg.name %> - Details</title>
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="icon" href="https://img.icons8.com/fluency/48/s-key.png" type="image/x-icon">
</head>
<body style="padding-top: 100px;"> <nav class="navbar">
        <div class="logo"><span>P</span> StayMyPg</div>
        <div class="nav-links">
            <a href="/">Home</a>
            <a href="#">Browse PGs</a>
            <a href="/contact">Contact</a>
        </div>
    </nav>

    <div class="details-container" style="max-width: 1100px; margin: 0 auto; padding: 20px; display: grid; grid-template-columns: 1.5fr 1fr; gap: 40px;">
        
        <section>
            <img src="<%= pg.image %>" style="width: 100%; height: 450px; object-fit: cover; border-radius: 24px; border: 1px solid rgba(255,255,255,0.1);">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
    <% if (pg.gallery && pg.gallery[0]) { %>
        <img src="<%= pg.gallery[0] %>" style="width: 100%; height: 200px; object-fit: cover; border-radius: 16px; border: 1px solid rgba(255,255,255,0.1);">
    <% } %>
    <% if (pg.gallery && pg.gallery[1]) { %>
        <img src="<%= pg.gallery[1] %>" style="width: 100%; height: 200px; object-fit: cover; border-radius: 16px; border: 1px solid rgba(255,255,255,0.1);">
    <% } %>
</div>
            <h1 style="font-size: 2.5rem; margin-top: 25px;"><%= pg.name %></h1>
            <p style="color: #94a3b8; font-size: 1.1rem; margin-bottom: 20px;">üìç <%= pg.location %></p>
            
            <div style="background: rgba(255,255,255,0.03); padding: 30px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.05);">
    <h3 style="color: #2563eb; margin-bottom: 15px;">Facilities & Amenities</h3>
    <ul style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; color: #cbd5e1; list-style: none; padding: 0;">
        <% if (pg.wifi) { %> <li>‚úÖ High-speed WiFi</li> <% } %>
        <% if (pg.food) { %> <li>‚úÖ Daily Meals Included</li> <% } %>
        <% if (pg.ac) { %> <li>‚úÖ Air Conditioning</li> <% } %>
        <% if (pg.laundry) { %> <li>‚úÖ Laundry Service</li> <% } %>
        <li>‚úÖ 24/7 Water Supply</li>
        <li>‚úÖ Daily Cleaning</li>
    </ul>
</div>
            <div style="margin-top: 30px; background: rgba(255,255,255,0.03); padding: 30px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.05);">
                <h3 style="color: #2563eb; margin-bottom: 15px;">Location & Surroundings</h3>
                <div id="map" style="height: 350px; width: 100%; border-radius: 16px; border: 1px solid rgba(255,255,255,0.1);"></div>
            </div>
            
        </section>
        <section class="inquiry-container" style="align-self: start;">
    <div class="inquiry-card" style="background: white; color: #1e293b; padding: 30px; border-radius: 24px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); height: auto;">
        
        <div class="inquiry-header">
            <h2 style="color: #0f172a; margin-bottom: 10px;">Interested in this PG?</h2>
            <p style="color: #64748b; font-size: 0.95rem; margin-bottom: 25px;">Send an inquiry to the owner for availability and visiting hours.</p>
        </div>

        <form action="/inquire" method="POST" class="modern-form">
            <input type="hidden" name="pgId" value="<%= pg.id %>">
            <input type="hidden" name="pgName" value="<%= pg.name %>">

            <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                <div class="form-group">
                    <label style="display: block; font-weight: 600; font-size: 14px; margin-bottom: 5px;">Full Name</label>
                    <input type="text" name="userName" required placeholder="Your Name" style="width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 10px;">
                </div>
                <div class="form-group">
                    <label style="display: block; font-weight: 600; font-size: 14px; margin-bottom: 5px;">Mobile Number</label>
                    <input type="tel" name="userPhone" required placeholder="+91 98765..." style="width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 10px;">
                </div>
            </div>

            <div class="form-group" style="margin-bottom: 15px;">
                <label style="display: block; font-weight: 600; font-size: 14px; margin-bottom: 5px;">Email Address (Optional)</label>
                <input type="email" name="userEmail" placeholder="name@example.com" style="width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 10px;">
            </div>

            <div class="form-group" style="margin-bottom: 20px;">
                <label style="display: block; font-weight: 600; font-size: 14px; margin-bottom: 5px;">Message</label>
                <textarea name="message" rows="3" placeholder="I would like to visit..." style="width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 10px; resize: none;"></textarea>
            </div>

            <button type="submit" class="inquiry-submit-btn" style="width: 100%; background: #2563eb; color: white; padding: 15px; border: none; border-radius: 12px; font-weight: 700; cursor: pointer; transition: background 0.2s;">
                Send Inquiry
            </button>
        </form>
    </div>
</section>
        <aside>
            <div style="background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); padding: 40px; border-radius: 24px; border: 1px solid rgba(255,255,255,0.1); position: sticky; top: 120px;">
                <p style="text-transform: uppercase; font-size: 12px; font-weight: 800; color: #94a3b8; letter-spacing: 1px;">Monthly Rent</p>
                <h2 style="font-size: 2.5rem; color: #2563eb; margin-bottom: 25px;">‚Çπ<%= pg.rent %><span style="font-size: 16px; color: #94a3b8;">/month</span></h2>
                
                <hr style="border: 0; border-top: 1px solid rgba(255,255,255,0.1); margin-bottom: 25px;">
                
                <h4 style="margin-bottom: 20px;">Contact Property Owner</h4>
                
                <a href="tel:+91<%= pg.ownerMobile %>" style="display: flex; align-items: center; justify-content: center; gap: 10px; background: #2563eb; color: white; text-decoration: none; padding: 15px; border-radius: 12px; font-weight: 700; margin-bottom: 15px;">
    üìû Call Owner
</a>

<a href="https://wa.me/91<%= pg.ownerMobile %>?text=Hi, I am interested in your PG: <%= pg.name %>" style="display: flex; align-items: center; justify-content: center; gap: 10px; background: #22c55e; color: white; text-decoration: none; padding: 15px; border-radius: 12px; font-weight: 700;">
    üí¨ WhatsApp Message
</a>
            </div>
        </aside>
    </div>
<script>
        function initMap() {
            // Safe conversion of EJS variables to numbers
            const lat = Number("<%= pg.lat %>") || 18.5204; 
            const lng = Number("<%= pg.lng %>") || 73.8567;

            const pgCoords = { lat: lat, lng: lng };

            // Initialize Map with your project's custom dark theme
            const map = new google.maps.Map(document.getElementById("map"), {
                zoom: 15,
                center: pgCoords,
                styles: [
                    { "elementType": "geometry", "stylers": [{ "color": "#1e293b" }] },
                    { "elementType": "labels.text.fill", "stylers": [{ "color": "#94a3b8" }] },
                    { "elementType": "labels.text.stroke", "stylers": [{ "color": "#1e293b" }] },
                    { "featureType": "road", "elementType": "geometry", "stylers": [{ "color": "#334155" }] },
                    { "featureType": "water", "elementType": "geometry", "stylers": [{ "color": "#0f172a" }] }
                ]
            });

            // Add the Property Marker
            new google.maps.Marker({
                position: pgCoords,
                map: map,
                title: "<%= pg.name %>",
                animation: google.maps.Animation.DROP
            });
        }
    </script>

    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC4_NmP-tDhGe_fd5XBLVDI9TkwKL6HyI0&callback=initMap">
    </script>
    
</body>
</html>